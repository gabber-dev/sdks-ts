<html>

<head>
    <script src="../dist/index.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- <script src="https://unpkg.com/gabber-client-widget/dist/index.js"></script> -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Proxima+Nova:wght@400;600;700&display=swap');

        body {
            font-family: 'Proxima Nova', sans-serif;
        }

        .gabber {
            width: 100vw;
            height: 100vh;
        }

        button:hover {
            color: white !important;
            background-color: currentColor !important;
        }
        button:hover span {
            color: white !important;
        }
    </style>
</head>

<body>
    <div class="gabber" id="gabber-conversational"></div>
</body>


<script>
    function tokenGenerator() {
        var api_key = ""
        var endpoint = "https://app.gabber.dev/api/v1/usage/token"
        var body = {
            human_id: "123",
            limits: [
                {
                    type: "conversational_seconds",
                    value: 10
                }
            ],

        }
        return fetch(endpoint, {
            method: "POST",
            headers: {
                "x-api-key": api_key,
                "Content-Type": "application/json"
            },
            body: JSON.stringify(body)
        }).then(res => {
            return res.json()
        }).then(res => {
            console.log("Got token", res)
            const token = res.token;
            return token;
        });
    }

    document.addEventListener('DOMContentLoaded', function() {
        Gabber.ConversationalWidget.create({
            elementID: "gabber-conversational",
            tokenGenerator,
            settings: {
                connectText: "connect",
                primaryColor: "#FFD700", // Gold
                primaryColorContent: "#000000", // Black
                secondaryColor: "#FF0000", // Red
                secondaryColorContent: "#FFFFFF", // White
                baseColor: "#000000", // Black
                baseColorPlusOne: "#1C1C1C", // Dark gray
                baseColorPlusTwo: "#373636", // Lighter gray
                baseColorContent: "#FFFFFF", // White
                accentColor: "#0000FF", // Blue
                audioPlaybackFailed: {
                    descriptionText: "AP Failed",
                    buttonText: "Start"
                }
            }
        })

        Gabber.VoiceGenerationWidget.create({
            elementID: "gabber-voice-generation",
            tokenGenerator,
            settings: {
                connectText: "connect",
                primaryColor: "#FFD700", // Gold
                primaryColorContent: "#000000", // Black
                secondaryColor: "#FF0000", // Red
                secondaryColorContent: "#FFFFFF", // White
                baseColor: "#000000", // Black
                baseColorPlusOne: "#1C1C1C", // Dark gray
                baseColorPlusTwo: "#373636", // Lighter gray
                baseColorContent: "#FFFFFF", // White
                accentColor: "#0000FF", // Blue
                audioPlaybackFailed: {
                    descriptionText: "AP Failed",
                    buttonText: "Start"
                }
            }
        })
    })
</script>

</html>