{"version":3,"names":["_react","_interopRequireWildcard","require","_session","_jsxRuntime","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","RealtimeSessionEngineContext","createContext","undefined","RealtimeSessionEngineProvider","connectionOpts","children","id","setId","useState","connectionState","setConnectionState","messages","setMessages","microphoneEnabledState","setMicrophoneEnabledState","agentVolumeBands","setAgentVolumeBands","agentVolume","setAgentVolume","userVolumeBands","setUserVolumeBands","userVolume","setUserVolume","agentState","setAgentState","remainingSeconds","setRemainingSeconds","lastError","setLastError","canPlayAudio","setCanPlayAudio","createOnce","useRef","transcription","setTranscription","text","final","lastUserMessage","useMemo","length","agent","useEffect","onConnectionStateChanged","sessionState","sessionEngine","current","onMessagesChanged","onMicrophoneChanged","enabled","onAgentVolumeChanged","values","volume","onUserVolumeChanged","onAgentStateChanged","as","onRemainingSecondsChanged","seconds","onAgentError","message","onCanPlayAudio","allowed","RealtimeSessionEngine","onCanPlayAudioChanged","setMicrophoneEnabled","console","error","sendChatMessage","p","startAudio","connect","disconnect","jsx","Provider","value","microphoneEnabled","useRealtimeSessionEngine","context","React","useContext","Error"],"sourceRoot":"../../../src","sources":["providers/realtime_session_engine.tsx"],"mappings":"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","ignoreList":[]}
