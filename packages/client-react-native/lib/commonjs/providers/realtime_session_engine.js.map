{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_livekitClient","_api","_jsxRuntime","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","registerGlobals","RealtimeSessionEngineContext","createContext","undefined","RealtimeSessionEngineProvider","connectionOpts","children","conDetails","setConDetails","useState","error","setError","useEffect","console","log","connection_details","api","Api","token","realtime","startRealtimeSession","then","res","data","catch","err","message","jsx","LiveKitRoom","serverUrl","url","connect","Boolean","RealtimeSessionEngineProviderInner","useDataChannel","agentParticipant","useRemoteParticipant","kind","ParticipantKind","AGENT","localParticipant","microphoneTrack","isMicrophoneEnabled","useLocalParticipant","metadata","useRoomInfo","roomConnectionState","useConnectionState","messages","setMessages","lastError","setLastError","transcription","setTranscription","text","final","lastUserMessage","useMemo","length","agent","id","JSON","parse","decoded","TextDecoder","decode","payload","topic","prev","newMessages","push","setMicrophoneEnabled","useCallback","enabled","sendChatMessage","p","te","TextEncoder","encoded","encode","stringify","publishData","agentMicrophoneTrack","track","audioTrackPublications","pub","source","Track","Source","Microphone","agentVolumeBands","useMultibandTrackVolume","maxFrequency","minFrequency","userVolumeBands","agentVolume","useTrackVolume","userVolume","connectionState","ConnectionState","Disconnected","Connecting","Reconnecting","agentState","remainingSeconds","mdStr","md","remaining_seconds","agent_state","Provider","value","microphoneEnabled","useRealtimeSessionEngine","context","React","useContext","Error"],"sourceRoot":"../../../src","sources":["providers/realtime_session_engine.tsx"],"mappings":"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","ignoreList":[]}
