{"version":3,"names":["createContext","useRef","useEffect","useState","useMemo","React","RealtimeSessionEngine","jsx","_jsx","RealtimeSessionEngineContext","undefined","RealtimeSessionEngineProvider","connectionOpts","children","id","setId","connectionState","setConnectionState","messages","setMessages","microphoneEnabledState","setMicrophoneEnabledState","agentVolumeBands","setAgentVolumeBands","agentVolume","setAgentVolume","userVolumeBands","setUserVolumeBands","userVolume","setUserVolume","agentState","setAgentState","remainingSeconds","setRemainingSeconds","lastError","setLastError","canPlayAudio","setCanPlayAudio","createOnce","transcription","setTranscription","text","final","lastUserMessage","i","length","agent","onConnectionStateChanged","sessionState","sessionEngine","current","onMessagesChanged","onMicrophoneChanged","enabled","onAgentVolumeChanged","values","volume","onUserVolumeChanged","onAgentStateChanged","as","onRemainingSecondsChanged","seconds","onAgentError","message","onCanPlayAudio","allowed","onCanPlayAudioChanged","setMicrophoneEnabled","console","error","sendChatMessage","p","startAudio","connect","disconnect","Provider","value","microphoneEnabled","useRealtimeSessionEngine","context","useContext","Error"],"sourceRoot":"../../../src","sources":["providers/realtime_session_engine.tsx"],"mappings":"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","ignoreList":[]}
