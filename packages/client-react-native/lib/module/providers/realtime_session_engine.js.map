{"version":3,"names":["createContext","useEffect","useState","useMemo","useCallback","React","LiveKitRoom","useConnectionState","useDataChannel","useLocalParticipant","useMultibandTrackVolume","useRemoteParticipant","useRoomInfo","useTrackVolume","registerGlobals","ParticipantKind","ConnectionState","Track","Api","jsx","_jsx","RealtimeSessionEngineContext","undefined","RealtimeSessionEngineProvider","connectionOpts","children","conDetails","setConDetails","error","setError","console","log","connection_details","api","token","realtime","startRealtimeSession","then","res","data","catch","err","message","serverUrl","url","connect","Boolean","RealtimeSessionEngineProviderInner","agentParticipant","kind","AGENT","localParticipant","microphoneTrack","isMicrophoneEnabled","metadata","roomConnectionState","messages","setMessages","lastError","setLastError","transcription","setTranscription","text","final","lastUserMessage","i","length","agent","id","JSON","parse","decoded","TextDecoder","decode","payload","topic","prev","newMessages","push","setMicrophoneEnabled","enabled","sendChatMessage","p","te","TextEncoder","encoded","encode","stringify","publishData","agentMicrophoneTrack","track","audioTrackPublications","pub","get","source","Source","Microphone","agentVolumeBands","maxFrequency","minFrequency","userVolumeBands","agentVolume","userVolume","connectionState","Disconnected","Connecting","Reconnecting","agentState","remainingSeconds","mdStr","md","remaining_seconds","agent_state","Provider","value","microphoneEnabled","useRealtimeSessionEngine","context","useContext","Error"],"sourceRoot":"../../../src","sources":["providers/realtime_session_engine.tsx"],"mappings":";;AAAA,SACEA,aAAa,EACbC,SAAS,EACTC,QAAQ,EACRC,OAAO,EACPC,WAAW,QACN,OAAO;AAQd,OAAOC,KAAK,MAAM,OAAO;AACzB,SACEC,WAAW,EACXC,kBAAkB,EAClBC,cAAc,EACdC,mBAAmB,EACnBC,uBAAuB,EACvBC,oBAAoB,EACpBC,WAAW,EACXC,cAAc,EACdC,eAAe,QACV,uBAAuB;AAC9B,SACEC,eAAe,EACfC,eAAe,EACfC,KAAK,QAGA,gBAAgB;AACvB,SAASC,GAAG,QAAQ,eAAY;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAEjCN,eAAe,CAAC,CAAC;AAmBjB,MAAMO,4BAA4B,gBAAGrB,aAAa,CAEhDsB,SAAS,CAAC;AAOZ,OAAO,SAASC,6BAA6BA,CAAC;EAC5CC,cAAc;EACdC;AACK,CAAC,EAAE;EACR,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAC/BzB,QAAQ,CAA0C,IAAI,CAAC;EACzD,MAAM,CAAC0B,KAAK,EAAEC,QAAQ,CAAC,GAAG3B,QAAQ,CAA6B,IAAI,CAAC;EAEpED,SAAS,CAAC,MAAM;IACd6B,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEP,cAAc,CAAC;IAClD,IAAI,CAACA,cAAc,EAAE;MACnB;IACF;IACA,IAAI,oBAAoB,IAAIA,cAAc,EAAE;MAC1CG,aAAa,CAACH,cAAc,CAACQ,kBAAkB,CAAC;IAClD,CAAC,MAAM,IAAI,OAAO,IAAIR,cAAc,IAAI,QAAQ,IAAIA,cAAc,EAAE;MAClE,MAAMS,GAAG,GAAG,IAAIf,GAAG,CAACM,cAAc,CAACU,KAAK,CAAC;MACzCD,GAAG,CAACE,QAAQ,CACTC,oBAAoB,CAACZ,cAAc,CAAC,CACpCa,IAAI,CAAEC,GAAG,IAAK;QACb,IAAIA,GAAG,CAACC,IAAI,CAACP,kBAAkB,EAAE;UAC/BL,aAAa,CAACW,GAAG,CAACC,IAAI,CAACP,kBAAkB,CAAC;QAC5C;MACF,CAAC,CAAC,CACDQ,KAAK,CAAEC,GAAG,IAAK;QACdZ,QAAQ,CAACY,GAAG,CAACC,OAAO,CAAC;MACvB,CAAC,CAAC;IACN;EACF,CAAC,EAAE,CAAClB,cAAc,CAAC,CAAC;EAEpB,oBACEJ,IAAA,CAACd,WAAW;IACVqC,SAAS,EAAEjB,UAAU,EAAEkB,GAAI;IAC3BV,KAAK,EAAER,UAAU,EAAEQ,KAAM;IACzBW,OAAO,EAAEC,OAAO,CAACpB,UAAU,CAAE;IAAAD,QAAA,eAE7BL,IAAA,CAAC2B,kCAAkC;MAACnB,KAAK,EAAEA,KAAM;MAAAH,QAAA,EAC9CA;IAAQ,CACyB;EAAC,CAC1B,CAAC;AAElB;AAMA,SAASsB,kCAAkCA,CAAC;EAAEnB,KAAK;EAAEH;AAAqB,CAAC,EAAE;EAC3E,MAAM;IAAEiB;EAAQ,CAAC,GAAGlC,cAAc,CAAC,CAAC;EACpC,MAAMwC,gBAAgB,GAAGrC,oBAAoB,CAAC;IAC5CsC,IAAI,EAAElC,eAAe,CAACmC;EACxB,CAAC,CAAC;EACF,MAAM;IAAEC,gBAAgB;IAAEC,eAAe;IAAEC;EAAoB,CAAC,GAC9D5C,mBAAmB,CAAC,CAAC;EACvB,MAAM;IAAE6C;EAAS,CAAC,GAAG1C,WAAW,CAAC,CAAC;EAClC,MAAM2C,mBAAmB,GAAGhD,kBAAkB,CAAC,CAAC;EAChD,MAAM,CAACiD,QAAQ,EAAEC,WAAW,CAAC,GAAGvD,QAAQ,CAA4B,EAAE,CAAC;EACvE,MAAM,CAACwD,SAAS,EAAEC,YAAY,CAAC,GAAGzD,QAAQ,CAA6B0B,KAAK,CAAC;EAC7E,MAAM,CAACgC,aAAa,EAAEC,gBAAgB,CAAC,GAAG3D,QAAQ,CAAC;IACjD4D,IAAI,EAAE,EAAE;IACRC,KAAK,EAAE;EACT,CAAC,CAAC;EAEF,MAAMC,eAAe,GAAG7D,OAAO,CAAC,MAAM;IACpC,KAAK,IAAI8D,CAAC,GAAGT,QAAQ,CAACU,MAAM,GAAG,CAAC,EAAED,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;MAC7C,IAAI,CAACT,QAAQ,CAACS,CAAC,CAAC,CAAEE,KAAK,EAAE;QACvB,OAAOX,QAAQ,CAACS,CAAC,CAAC;MACpB;IACF;IACA,OAAO,IAAI;EACb,CAAC,EAAE,CAACT,QAAQ,CAAC,CAAC;EAEd,MAAM;IAAEY;EAA0B,CAAC,GAAGjE,OAAO,CAAC,MAAM;IAClD,IAAI,CAACmD,QAAQ,EAAE;MACb,OAAO;QAAEc,EAAE,EAAE;MAAK,CAAC;IACrB;IACA,OAAO;MAAEA,EAAE,EAAEC,IAAI,CAACC,KAAK,CAAChB,QAAQ,CAAC,CAAC,SAAS,CAAC,IAAI;IAAK,CAAC;EACxD,CAAC,EAAE,CAACA,QAAQ,CAAC,CAAC;EAEdrD,SAAS,CAAC,MAAM;IACd,IAAI,CAACyC,OAAO,EAAE;MACZ;IACF;IACA,MAAM6B,OAAO,GAAG,IAAIC,WAAW,CAAC,CAAC,CAACC,MAAM,CAAC/B,OAAO,CAACgC,OAAO,CAAC;IACzD,IAAIhC,OAAO,EAAEiC,KAAK,KAAK,SAAS,EAAE;MAChC,MAAMjC,OAAO,GAAG2B,IAAI,CAACC,KAAK,CAACC,OAAO,CAA4B;MAC9Dd,WAAW,CAAEmB,IAAI,IAAK;QACpB,MAAMC,WAAW,GAAG,CAAC,GAAGD,IAAI,CAAC;QAC7BC,WAAW,CAACC,IAAI,CAACpC,OAAO,CAAC;QACzB,OAAOmC,WAAW;MACpB,CAAC,CAAC;MACFhB,gBAAgB,CAAC;QAAEE,KAAK,EAAErB,OAAO,CAACqB,KAAK;QAAED,IAAI,EAAEpB,OAAO,CAACoB;MAAK,CAAC,CAAC;IAChE,CAAC,MAAM,IAAIpB,OAAO,EAAEiC,KAAK,KAAK,OAAO,EAAE;MACrC,MAAMD,OAAO,GAAGL,IAAI,CAACC,KAAK,CAACC,OAAO,CAAC;MACnCZ,YAAY,CAAC;QAAEjB,OAAO,EAAEgC,OAAO,CAAChC;MAAQ,CAAC,CAAC;IAC5C;EACF,CAAC,EAAE,CAACA,OAAO,CAAC,CAAC;EAEbzC,SAAS,CAAC,MAAM;IACd4D,gBAAgB,CAAC;MAAEE,KAAK,EAAE,KAAK;MAAED,IAAI,EAAEE,eAAe,EAAEF,IAAI,IAAI;IAAG,CAAC,CAAC;EACvE,CAAC,EAAE,CAACE,eAAe,CAAC,CAAC;EAErB,MAAMe,oBAAoB,GAAG3E,WAAW,CACtC,MAAO4E,OAAgB,IAAK;IAC1B,MAAM7B,gBAAgB,CAAC4B,oBAAoB,CAACC,OAAO,CAAC;EACtD,CAAC,EACD,CAAC7B,gBAAgB,CACnB,CAAC;EAED,MAAM8B,eAAe,GAAG7E,WAAW,CACjC,MAAO8E,CAA2B,IAAK;IACrC,IAAI,CAACA,CAAC,CAACpB,IAAI,EAAE;MACXhC,OAAO,CAACF,KAAK,CAAC,mCAAmC,CAAC;MAClD;IACF;IACA,MAAMuD,EAAE,GAAG,IAAIC,WAAW,CAAC,CAAC;IAC5B,MAAMC,OAAO,GAAGF,EAAE,CAACG,MAAM,CAACjB,IAAI,CAACkB,SAAS,CAAC;MAAEzB,IAAI,EAAEoB,CAAC,CAACpB;IAAK,CAAC,CAAC,CAAC;IAC3D,MAAMX,gBAAgB,CAACqC,WAAW,CAACH,OAAO,EAAE;MAC1CV,KAAK,EAAE;IACT,CAAC,CAAC;EACJ,CAAC,EACD,CAACxB,gBAAgB,CACnB,CAAC;EAED,MAAMsC,oBAAkD,GAAGtF,OAAO,CAAC,MAAM;IACvE,IAAI,CAAC6C,gBAAgB,EAAE;MACrB;IACF;IACA,KAAK,MAAM0C,KAAK,IAAI1C,gBAAgB,CAAC2C,sBAAsB,EAAE;MAC3D,MAAMC,GAAG,GAAG5C,gBAAgB,CAAC2C,sBAAsB,CAACE,GAAG,CAACH,KAAK,CAAC;MAC9D,IAAI,CAACE,GAAG,EAAE;QACR;MACF;MACA,IAAIA,GAAG,CAACE,MAAM,KAAK7E,KAAK,CAAC8E,MAAM,CAACC,UAAU,EAAE;QAC1C,OAAOJ,GAAG,CAACF,KAAK;MAClB;IACF;IACA;EACF,CAAC,EAAE,CAAC1C,gBAAgB,CAAC,CAAC;EAEtB,MAAMiD,gBAAgB,GAAGvF,uBAAuB,CAAC+E,oBAAoB,EAAE;IACrES,YAAY,EAAE,IAAI;IAClBC,YAAY,EAAE;EAChB,CAAC,CAAC;EACF,MAAMC,eAAe,GAAG1F,uBAAuB,CAC7C0C,eAAe,EAAEsC,KAAK,EACtB;IAAEQ,YAAY,EAAE,IAAI;IAAEC,YAAY,EAAE;EAAI,CAC1C,CAAC;EACD,MAAME,WAAW,GAAGxF,cAAc,CAAC4E,oBAAoB,CAAC;EACxD,MAAMa,UAAU,GAAGzF,cAAc,CAC/BuC,eAAe,EAAEsC,KACnB,CAAC;EAED,MAAMa,eAAmC,GAAGpG,OAAO,CAAC,MAAM;IACxD,IAAIoD,mBAAmB,KAAKvC,eAAe,CAACwF,YAAY,EAAE;MACxD,OAAO,eAAe;IACxB;IACA,IACEjD,mBAAmB,KAAKvC,eAAe,CAACyF,UAAU,IAClDlD,mBAAmB,KAAKvC,eAAe,CAAC0F,YAAY,EACpD;MACA,OAAO,YAAY;IACrB;IAEA,IAAI,CAAC1D,gBAAgB,EAAE;MACrB,OAAO,mBAAmB;IAC5B;IAEA,IAAI,CAACyC,oBAAoB,EAAE;MACzB,OAAO,mBAAmB;IAC5B;IAEA,OAAO,WAAW;EACpB,CAAC,EAAE,CAACA,oBAAoB,EAAEzC,gBAAgB,EAAEO,mBAAmB,CAAC,CAAC;EAEjE,MAAM;IACJoD,UAAU;IACVC;EAC8D,CAAC,GAC/DzG,OAAO,CAAC,MAAM;IACZ,IAAI,CAAC6C,gBAAgB,EAAE;MACrB,OAAO;QAAE2D,UAAU,EAAE,QAAQ;QAAEC,gBAAgB,EAAE;MAAK,CAAC;IACzD;IACA,MAAMC,KAAK,GAAG7D,gBAAgB,CAACM,QAAQ;IACvC,IAAI,CAACuD,KAAK,EAAE;MACV/E,OAAO,CAACF,KAAK,CAAC,2BAA2B,CAAC;MAC1C,OAAO;QAAE+E,UAAU,EAAE,QAAQ;QAAEC,gBAAgB,EAAE;MAAK,CAAC;IACzD;IACA,IAAIA,gBAA+B,GAAG,IAAI;IAC1C,IAAID,UAAyB,GAAG,QAAQ;IACxC,MAAMG,EAAE,GAAGzC,IAAI,CAACC,KAAK,CAACuC,KAAK,CAAC;IAC5B,IAAIC,EAAE,CAACC,iBAAiB,EAAE;MACxBH,gBAAgB,GAAGE,EAAE,CAACC,iBAAiB;IACzC;IACA,MAAM;MAAEC;IAAY,CAAC,GAAGF,EAAE;IAC1B,IACEE,WAAW,KAAK,UAAU,IAC1BA,WAAW,KAAK,WAAW,IAC3BA,WAAW,KAAK,UAAU,IAC1BA,WAAW,KAAK,QAAQ,IACxBA,WAAW,KAAK,qBAAqB,IACrCA,WAAW,KAAK,sBAAsB,EACtC;MACAlF,OAAO,CAACF,KAAK,CAAC,0BAA0B,EAAEoF,WAAW,CAAC;MACtD,OAAO;QAAEL,UAAU,EAAE,QAAQ;QAAEC;MAAiB,CAAC;IACnD;IACAD,UAAU,GAAGK,WAAW;IACxB,OAAO;MAAEL,UAAU;MAAEC;IAAiB,CAAC;EACzC,CAAC,EAAE,CAAC5D,gBAAgB,CAAC,CAAC;EAExB,oBACE5B,IAAA,CAACC,4BAA4B,CAAC4F,QAAQ;IACpCC,KAAK,EAAE;MACL9C,EAAE;MACFZ,QAAQ;MACR+C,eAAe,EAAEA,eAAe;MAChCY,iBAAiB,EAAE9D,mBAAmB;MACtC4C,gBAAgB;MAChBI,WAAW;MACXD,eAAe;MACfE,UAAU;MACVK,UAAU;MACVC,gBAAgB;MAChBhD,aAAa;MACbF,SAAS;MACTuB,eAAe;MACfF;IACF,CAAE;IAAAtD,QAAA,EAEDA;EAAQ,CAC4B,CAAC;AAE5C;AAEA,OAAO,SAAS2F,wBAAwBA,CAAA,EAAG;EACzC,MAAMC,OAAO,GAAGhH,KAAK,CAACiH,UAAU,CAACjG,4BAA4B,CAAC;EAC9D,IAAI,CAACgG,OAAO,EAAE;IACZ,MAAM,IAAIE,KAAK,CAAC,kDAAkD,CAAC;EACrE;EACA,OAAOF,OAAO;AAChB","ignoreList":[]}
